# **ğŸ”„ Comprendre le Workflow de Notification**

Quand un service ou un hÃ´te change dâ€™Ã©tat, Centreon ne **notifie pas automatiquement**. Il suit un **workflow strict**, Ã©tape par Ã©tape. Pour bien dÃ©bugger, il faut comprendre **ce qui se passe en interne**, et **oÃ¹ la chaÃ®ne peut Ãªtre rompue**.



## **ğŸ§  SOFT vs HARD : Le cÅ“ur du systÃ¨me**

Un Ã©tat **SOFT** (provisoire, en phase de confirmation) **ne dÃ©clenche jamais de notification**.

â¡ï¸ Seul un **Ã©tat HARD** (confirmÃ© aprÃ¨s X tentatives) **active le moteur de notification**.

Tu dois donc **vÃ©rifier le niveau du statut** avant toute autre chose.



## **âš™ï¸ Conditions de DÃ©clenchement**

Un certain nombre de conditions doivent Ãªtre **toutes validÃ©es** pour quâ€™une notification parte :

- **Statut HARD** âœ…
- **Notifications activÃ©es** sur lâ€™hÃ´te/le service ET dans le template ğŸ§¬
- **Pas de Downtime en cours** ğŸ’¤
- **PÃ©riode de notification OK** (ex: 9h-18h) â°
- **Type de statut concernÃ© bien configurÃ© pour Ãªtre notifiÃ©** (critique, warning, recovery...) ğŸš¨

ğŸ‘‰ Si une seule condition est KO, **la notif ne partira pas**.



## **ğŸ“¦ Templates et HÃ©ritage**

Les templates sont souvent Ã  lâ€™origine dâ€™un oubli :

- Une **notification dÃ©sactivÃ©e dans un template** dÃ©sactive la notif partout oÃ¹ ce template est appliquÃ©.
- **Attention Ã  lâ€™hÃ©ritage** : un service peut hÃ©riter dâ€™un template qui **Ã©crase les paramÃ¨tres**.

VÃ©rifie donc :

- **Templates de services/hÃ´tes** âœ”ï¸
- **Inheritance dans les dÃ©pendances de configuration** ğŸ§©



## **ğŸ‘¤ Contacts et Commandes**

Une fois que le statut est **prÃªt Ã  notifier**, Centreon :

1.  RÃ©cupÃ¨re la **liste des contacts associÃ©s**
2.  Pour chaque contact, vÃ©rifie :

    - ğŸ“¬ Notifications activÃ©es ?
    - â° PÃ©riode de notification OK ?
    - ğŸš¦ Notif autorisÃ©e pour le type de statut actuel ?

3.  ğŸ› ï¸ Puis exÃ©cute la **commande de notification** associÃ©e (ex : email, SMS, etc.)

ğŸ‘‰ Si la commande est mal configurÃ©e (mauvais binaire, mauvaise syntaxe), la notif Ã©choue **mÃªme si tout le reste est bon**.

